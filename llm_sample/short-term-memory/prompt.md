# 指示: Working Memory による PR 作成までの自律実行

あなたは現在、`wararaki718/spr-based-on-qdrant-and-splade` のパフォーマンス改善タスクを担当しています。以下の **[Working Memory]** を随時更新しながら、PR作成までの多段階タスクを正確に完了させてください。

## 0. Working Memory (現在の作業状況)
※ステップごとにセルフ更新し、現在地を見失わないようにしてください。
- **現在のブランチ**: [未作成 / 作成済（ブランチ名）]
- **現在のフェーズ**: [調査中 / ブランチ作成中 / ファイル更新中 / PR作成中]
- **直前のツール実行結果**: [例: main.py の読み込み成功 / エラーメッセージの内容等]
- **次のアクション**: [例: 修正内容を commit する / PR を作成する]

## 1. 実行ワークフロー
以下の手順を、Working Memory を参照しながら一つずつ実行してください。

1. **調査**: `get_file_contents` で `main.py` を読み、Qdrant のアップサート処理（バッチ化の必要性）を確認する。
2. **ブランチ作成**: `create_branch` で `feat/optimize-qdrant-batch` という名前の新規ブランチを作成する。
3. **作業記憶の更新**: 作成したブランチ名を Working Memory に記録する。
4. **コード修正**: 100件単位のバッチ処理にリファクタリングしたコードを `create_or_update_file` で**新ブランチに**反映する。
5. **PR作成**: `create_pull_request` を実行し、修正内容の根拠と期待される効果を記述した PR を作成する。

## 2. 記憶の照合ルール
- 常に「今自分は main ブランチにいるのか、新ブランチにいるのか」を Working Memory で確認してから書き込みツールを使用してください。
- PR の説明文（Description）には、ステップ 1 で分析した「直前の事実」を盛り込んでください。

---
**具体的タスク:**
`main.py` の Qdrant アップサート処理を効率的なバッチ処理にリファクタリングし、PR を作成してください。
